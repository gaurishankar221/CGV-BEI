# Program 3: Compare Region 1 and Region 2 Point Spacing

import matplotlib.pyplot as plt
import math

def midpoint_ellipse_regions(rx, ry, xc, yc):
    x = 0
    y = ry

    p1 = ry**2 - rx**2 * ry + 0.25 * rx**2
    dx = 2 * ry**2 * x
    dy = 2 * rx**2 * y

    region1 = []
    region2 = []

    while dx < dy:
        region1.append((xc + x, yc + y))
        if p1 < 0:
            x += 1
            dx = 2 * ry**2 * x
            p1 += dx + ry**2
        else:
            x += 1
            y -= 1
            dx = 2 * ry**2 * x
            dy = 2 * rx**2 * y
            p1 += dx - dy + ry**2

    p2 = (ry**2) * (x + 0.5)**2 + (rx**2) * (y - 1)**2 - (rx**2 * ry**2)

    while y >= 0:
        region2.append((xc + x, yc + y))
        if p2 > 0:
            y -= 1
            dy = 2 * rx**2 * y
            p2 += rx**2 - dy
        else:
            y -= 1
            x += 1
            dx = 2 * ry**2 * x
            dy = 2 * rx**2 * y
            p2 += dx - dy + rx**2

    return region1, region2


rx = 8
ry = 5

r1, r2 = midpoint_ellipse_regions(rx, ry, 0, 0)

# Calculate average spacing
def avg_spacing(points):
    distances = []
    for i in range(len(points)-1):
        x1, y1 = points[i]
        x2, y2 = points[i+1]
        distances.append(math.sqrt((x2-x1)**2 + (y2-y1)**2))
    return sum(distances)/len(distances)

print("Average spacing in Region 1:", avg_spacing(r1))
print("Average spacing in Region 2:", avg_spacing(r2))

# Plot for visualization
x1 = [p[0] for p in r1]
y1 = [p[1] for p in r1]
x2 = [p[0] for p in r2]
y2 = [p[1] for p in r2]

plt.scatter(x1, y1, color='blue', label='Region 1')
plt.scatter(x2, y2, color='red', label='Region 2')
plt.gca().set_aspect('equal')
plt.legend()
plt.title("Region 1 vs Region 2 Point Spacing")
plt.grid(True)
plt.show()